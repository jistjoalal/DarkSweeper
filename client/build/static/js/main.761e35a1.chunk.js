(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{10:function(e,t,a){e.exports=a(19)},15:function(e,t,a){},19:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(8),o=a.n(i),l=a(1),s=a(2),c=a(4),u=a(3),m=a(5),g=a(6),f=a(9),h=a.n(f),d=function(e){function t(){return Object(l.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props,t=e.isRevealed,a=e.hasMine,n=e.nearby,i=e.flag,o=e.onMouseDown,l=e.onMouseUp,s=e.onMouseEnter,c=e.onMouseLeave,u=e.xray,m=e.theme;return r.a.createElement("div",{className:"Tile-".concat(m),onMouseDown:o,onMouseUp:l,onMouseEnter:s,onMouseLeave:c,onContextMenu:function(e){return e.preventDefault()}},r.a.createElement(v,{isRevealed:t,flag:i,xray:u,theme:m},r.a.createElement(p,{hasMine:a,nearby:n})))}}]),t}(n.Component),v=function(e){var t=e.isRevealed,a=e.flag,n=e.children,i=e.xray,o=e.theme;return t?n:r.a.createElement("div",{className:"Cover-".concat(o)},a?r.a.createElement(S,null):i?n:null)},p=function(e){var t=e.hasMine,a=e.nearby;return t?r.a.createElement(b,null):r.a.createElement(y,{n:a})},y=function(e){var t=e.n;return r.a.createElement("span",{className:"nearby".concat(t)},0!==t?t:null)},b=function(){return r.a.createElement("img",{className:"Mine",src:h.a,alt:"X"})},S=function(){return r.a.createElement("span",{className:"Flag"},"F")},E=d,w=function(e){return Object(g.a)(Array(e).keys())},N=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(a=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(i)))).renderTileAt=function(e){var t=e.i,n=e.j,i=a.props.gridState[t][n],o=i.isRevealed,l=i.hasMine,s=i.nearby,c=i.flag,u=i.isHighlighted,m=i.xray,g=!!u||o,f=!u&&l,h=o?s:u?0:s;return r.a.createElement(E,{isRevealed:g,hasMine:f,nearby:h,flag:c,xray:m||a.props.xray,theme:a.props.theme,onMouseDown:function(e){return a.props.mouseDown(e,t,n)},onMouseUp:function(e){return a.props.mouseUp(e,t,n)},onMouseEnter:function(e){return a.props.mouseEnter(e,t,n)},onMouseLeave:function(e){return a.props.mouseLeave(e,t,n)}})},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this,t=this.props.gridState;return null===t?null:w(t.length).map(function(a){return r.a.createElement("div",{key:a,className:"Game-grid-row"},w(t[a].length).map(function(t){return r.a.createElement(e.renderTileAt,{key:"".concat(a,",").concat(t),i:a,j:t})}))})}}]),t}(n.Component),k=function(e){return e.show?e.children:null},M=(a(15),[[-1,-1],[0,-1],[1,-1],[-1,0],[1,0],[-1,1],[0,1],[1,1]]),x=function(e){return Object(g.a)(Array(e).keys())},C=function(e){return r.a.createElement(k,{show:e.show},r.a.createElement("div",{className:"Popup",onContextMenu:function(e){return e.preventDefault()}},r.a.createElement("div",{className:"Popup-inner"},r.a.createElement("p",null,e.text),"Winner!"===e.text?r.a.createElement("div",{className:"Popup-score"},r.a.createElement("p",null,"Difficulty: ",e.score," | Time: ",e.time),r.a.createElement("form",{onSubmit:function(t){return e.submitHiscore(t)}},r.a.createElement("input",{autoFocus:!0,className:"Popup-name",type:"text",placeholder:"Name"}),r.a.createElement("input",{className:"Popup-submit",type:"submit",value:"Submit"}))):null,r.a.createElement("button",{className:"close",onClick:e.closePopup},"Back"))))},G=function(e){var t=e.mines,a=(e.flags,e.hidden),n=e.time;return r.a.createElement("div",{className:"Game-info"},r.a.createElement("p",null,r.a.createElement("span",{role:"img","aria-label":"bomb"},"\ud83d\udca3")," ",t,r.a.createElement("span",{role:"img","aria-label":"question"}," \u2753")," ",a,r.a.createElement("span",{role:"img","aria-label":"timer"}," \u23f1")," ",n),r.a.createElement("p",null,r.a.createElement("span",{role:"img","aria-label":"ok"},"\ud83d\udc4c "),"Click around with right+left click for a safe start!"),r.a.createElement("p",null,r.a.createElement("span",{role:"img","aria-label":"score"},"\ud83d\udcaf "),r.a.createElement("a",{href:"http://www.minesweeper.info/wiki/3BV",target:"blank"},"Difficulty = minimum # of left clicks to win")),r.a.createElement("p",null,r.a.createElement("span",{role:"img","aria-label":"radioactive"},"\u2622 "),"Use middle click to xray (cheat) the area."))},R=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).submitHiscore=function(e){e.preventDefault();var t=e.target[0].value,n=a.state,r=n.score,i=n.time;console.log(t,r,i),a.newGame()},a.scoreGrid=function(){var e=a.anyUnrevealedBlank(),t=a.anyUnrevealedNumbers();return e?(a.reveal(e.i,e.j),1+a.scoreGrid()):t?(a.reveal(t.i,t.j),1+a.scoreGrid()):0},a.anyUnrevealedNumbers=function(){var e=a.state.gridState,t=!1;return e.forEach(function(e,a){e.forEach(function(e,n){e.isRevealed||e.hasMine||(t={i:a,j:n})})}),t},a.anyUnrevealedBlank=function(){var e=a.state.gridState,t=!1;return e.forEach(function(e,a){e.forEach(function(e,n){0!==e.nearby||e.isRevealed||e.hasMine||(t={i:a,j:n})})}),t},a.resetGrid=function(){a.everyTile(function(e,t){return a.changeTile(e,t,{isRevealed:!1,flag:!1})})},a.newGridState=function(){var e=a.state,t=e.nRows,n=e.nCols,r=e.chance;return x(t).map(function(e){return x(n).map(function(e){return{isRevealed:!1,hasMine:Math.random()<r,nearby:0,flag:!1,isHighlighted:!1,xray:!1}})})},a.mouseEnter=function(e,t,n){"Playing"===a.state.gameStatus&&(3===e.buttons&&a.highlightArea(t,n,!0),4===e.buttons&&a.xrayArea(t,n,!0))},a.mouseLeave=function(e,t,n){3===e.buttons&&a.highlightArea(t,n,!1),4===e.buttons&&a.xrayArea(t,n,!1)},a.mouseDown=function(e,t,n){e.preventDefault(),"Playing"===a.state.gameStatus&&(3===e.buttons&&(a.setState({ignoreNextClick:!0}),a.highlightArea(t,n,!0)),1===e.button&&a.xrayArea(t,n,!0))},a.mouseUp=function(e,t,n){var r=a.state,i=r.ignoreNextClick,o=r.gridState;if([1,2].includes(e.buttons))return a.setState({ignoreNextClick:!0}),a.highlightArea(t,n,!1),void(o[t][n].nearby!==a.nearbyFlags(t,n)||o[t][n].hasMine||(a.reveal(t,n),a.eachNearby(t,n,function(e,t){a.reveal(e,t)})));1===e.button?a.xrayArea(t,n,!1):0!==e.button||i?2!==e.button||i||a.handleRightClick(t,n):a.handleClick(t,n),a.setState({ignoreNextClick:!1})},a.handleClick=function(e,t){var n=a.state,r=n.gridState,i=n.gameStatus,o=r[e][t].flag;"Playing"!==i||o||a.reveal(e,t)},a.handleRightClick=function(e,t){var n=a.state,r=n.gridState,i=n.gameStatus,o=n.totalFlags,l=r[e][t],s=l.isRevealed,c=l.flag;if("Playing"===i&&!s){a.changeTile(e,t,{flag:!c});var u=c?-1:1;a.setState({totalFlags:o+u})}},a.newGame=function(){a.setState({gridState:a.newGridState(),gameStatus:"New Game"}),clearInterval(a.timer),a.timer=setInterval(function(){return a.tick()},1e3)},a.tick=function(){var e=a.state,t=e.totalHidden,n=e.nRows,r=e.nCols,i=e.gameStatus;t!==n*r&&"Playing"===i&&a.setState({time:a.state.time+1})},a.toggleTheme=function(){var e="dark"===a.state.theme?"light":"dark";a.setState({theme:e})},a.toggleInfo=function(){var e=a.state.infoOn;a.setState({infoOn:!e})},a.toggleXray=function(){a.setState({xray:!a.state.xray})},a.submitSize=function(e){"Enter"===e.key&&(e.target.blur(),a.newGame())},a.xrayArea=function(e,t,n){a.changeTile(e,t,{xray:n}),a.eachNearby(e,t,function(e,t){a.changeTile(e,t,{xray:n})})},a.highlightArea=function(e,t,n){var r=a.state.gridState;a.changeTile(e,t,{isHighlighted:n}),a.eachNearby(e,t,function(e,t){r[e][t].flag||a.changeTile(e,t,{isHighlighted:n})})},a.reveal=function(e,t){var n=a.state.gridState,r=n[e][t],i=r.nearby,o=r.hasMine,l=r.flag;return n[e][t].isRevealed||l?0:o?(a.changeTile(e,t,{isRevealed:!0}),a.setState({gameStatus:"Game Over"})):(a.changeTile(e,t,{isRevealed:!0}),a.setState({gameStatus:"Calculating"}),void(0!==i||o||a.eachNearby(e,t,function(e,t){a.reveal(e,t)})))},a.countNearby=function(){a.everyTile(function(e,t){return a.changeTile(e,t,{nearby:a.nearbyMines(e,t)})})},a.nearbyMines=function(e,t){var n=a.state.gridState,r=0;return a.eachNearby(e,t,function(e,t){return r+=n[e][t].hasMine?1:0}),r},a.nearbyFlags=function(e,t){var n=a.state.gridState,r=0;return a.eachNearby(e,t,function(e,t){return r+=n[e][t].flag?1:0}),r},a.eachNearby=function(e,t,n){M.forEach(function(r){var i=e+r[0],o=t+r[1];a.validTile(i,o)&&n(i,o)})},a.gridReduce=function(e){var t=0;return a.everyTile(function(a,n){return t+=e(a,n)}),t},a.changeTile=function(e,t,n){var r=a.state.gridState.slice();Object.assign(r[e][t],n),a.setState({gridState:r})},a.everyTile=function(e){return a.state.gridState.map(function(t,a){return t.map(function(t,n){return e(a,n)})})},a.validTile=function(e,t){return"undefined"!==typeof a.state.gridState[e]&&"undefined"!==typeof a.state.gridState[e][t]},a.state={nRows:10,nCols:10,chance:.1,gridState:null,totalMines:0,totalFlags:0,totalHidden:100,gameStatus:"Loading",time:0,score:0,theme:"dark",xray:!1,infoOn:!1,ignoreNextClick:!1},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this,t=this.state,a=t.gameStatus,n=t.gridState,i=t.nRows,o=t.nCols,l=t.chance,s=t.totalMines,c=t.totalFlags,u=t.totalHidden,m=t.xray,g=t.infoOn,f=t.theme,h=t.time,d=t.score;return r.a.createElement("div",{className:"Game"},r.a.createElement("div",{className:"Game-menu"},r.a.createElement("div",null,r.a.createElement("button",{className:"Game-button",onClick:this.newGame},"New Game"),r.a.createElement("button",{className:"Game-button".concat(g?" toggle":""),onClick:this.toggleInfo},"Game Info"),r.a.createElement("button",{className:"Game-button".concat(m?" toggle":""),onClick:this.toggleXray},"X-RAY"),r.a.createElement("button",{className:"Game-button".concat("light"===f?" toggle":""),onClick:this.toggleTheme},"Theme")),r.a.createElement("div",null,r.a.createElement("input",{className:"Game-input",type:"number",value:o,min:1,onChange:function(t){return e.setState({nCols:parseInt(t.target.value)})},onKeyUp:function(t){return e.submitSize(t)}}),"x",r.a.createElement("input",{className:"Game-input",type:"number",value:i,min:1,onChange:function(t){return e.setState({nRows:parseInt(t.target.value)})},onKeyUp:function(t){return e.submitSize(t)}}),"x",r.a.createElement("input",{className:"Game-input",type:"number",value:l,min:0,step:.01,onChange:function(t){return e.setState({chance:parseFloat(t.target.value)})},onKeyUp:function(t){return e.submitSize(t)}}))),r.a.createElement("div",{className:"Game-grid"},r.a.createElement(N,{gridState:n,xray:m,theme:f,mouseDown:this.mouseDown,mouseUp:this.mouseUp,mouseEnter:this.mouseEnter,mouseLeave:this.mouseLeave}),r.a.createElement(C,{show:"Playing"!==a,text:a,submitHiscore:this.submitHiscore,score:d,time:h,closePopup:this.newGame})),g?r.a.createElement(G,{mines:s,flags:c,hidden:u,time:h}):null)}},{key:"componentDidMount",value:function(){this.newGame()}},{key:"componentDidUpdate",value:function(){var e=this.state,t=e.totalHidden,a=e.totalMines,n=e.nRows,r=e.nCols,i=e.gameStatus,o=e.gridState;"New Game"===i&&(this.countNearby(),this.setState({totalMines:this.gridReduce(function(e,t){return o[e][t].hasMine?1:0}),totalFlags:0,totalHidden:n*r,time:0,score:0,gameStatus:"Playing"})),"Calculating"===i&&this.setState({totalHidden:this.gridReduce(function(e,t){return o[e][t].isRevealed?0:1}),gameStatus:"Playing"}),t===a&&(this.setState({gameStatus:"Scoring",totalMines:a.toString()}),clearInterval(this.timer),this.resetGrid()),"Scoring"===i&&this.setState({gameStatus:"Winner!",score:this.scoreGrid()})}},{key:"componentWillUnmount",value:function(){clearInterval(this.timer)}}]),t}(n.Component);o.a.render(r.a.createElement(R,null),document.getElementById("root"))},9:function(e,t,a){e.exports=a.p+"static/media/logo.932fdead.svg"}},[[10,2,1]]]);
//# sourceMappingURL=main.761e35a1.chunk.js.map