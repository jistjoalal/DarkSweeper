{"version":3,"sources":["img/logo.svg","components/generic.js","components/Tile.js","components/TileGrid.js","components/GameInfo.js","components/GameButtons.js","components/GameInputs.js","components/Popup.js","components/Hiscores.js","components/Game.js","App.js","index.js"],"names":["module","exports","__webpack_require__","p","HiddenToggle","props","show","children","range","n","Object","toConsumableArray","Array","keys","Tile","_this$props","this","isRevealed","hasMine","nearby","flag","onMouseDown","onMouseUp","onMouseEnter","onMouseLeave","handleTouch","xray","theme","react_default","a","createElement","className","concat","onTouchEnd","onContextMenu","e","preventDefault","Tile_Over","Tile_Under","Component","Over","_ref","Tile_Flag","Under","_ref2","Tile_Mine","Tile_ColoredNumber","ColoredNumber","_ref3","Mine","src","logo","alt","Flag","TileGrid","renderTileAt","i","j","_this$props$gridState","_this","gridState","isHighlighted","isR","hasM","nB","components_Tile","mouseDown","mouseUp","mouseEnter","mouseLeave","_this2","length","map","key","GameInfo","mines","hidden","time","role","aria-label","href","target","GameButtons","newGame","infoOn","xrayOn","toggleInfo","toggleXray","toggleTheme","onClick","GameInputs","nCols","nRows","chance","onColChange","onRowChange","onChanceChange","submitSize","type","value","min","max","onChange","onKeyUp","step","Popup","text","score","xrayUsed","onSubmit","submitHiscore","autoFocus","placeholder","closePopup","getHiscoresQuery","gql","_templateObject","addHiscoreMutation","_templateObject2","Hiscores","classCallCheck","possibleConstructorReturn","getPrototypeOf","call","displayHiscores","data","loading","hiscores","hiscore","Hiscores_Hiscore","assign","id","scoreSubmission","name","variables","objectSpread","refetchQueries","query","state","lastSubmission","setState","Hiscore","compose","graphql","NEARBY_COORDS","Game","changedTouches","identifier","handleRightClick","gameStatus","buttons","highlightArea","xrayArea","ignoreNextClick","button","_this$state","includes","nearbyFlags","reveal","eachNearby","ix","jy","handleClick","_this$state2","_this$state3","totalFlags","_gridState$i$j","changeTile","flagChange","newGridState","clearInterval","timer","setInterval","tick","_this$state4","totalHidden","newTheme","isNaN","parseInt","parseFloat","_this$state5","speed","scoreGrid","anyUB","anyUnrevealedBlank","anyUN","anyUnrevealedNumbers","any","forEach","row","tile","_this$state6","Math","random","resetGrid","everyTile","toggle","_gridState$i$j2","gridReduce","countNearby","nearbyMines","sum","callback","c","validTile","reducer","change","slice","totalMines","_this$state7","components_GameButtons","components_GameInputs","components_TileGrid","components_Popup","components_GameInfo","flags","components_Hiscores","_this$state8","toString","client","ApolloClient","uri","App","react_apollo_browser_umd","src_components_Game","ReactDOM","render","src_App","document","getElementById"],"mappings":"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","file":"static/js/main.b92b0b0d.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/logo.eed724ad.svg\";","const HiddenToggle = props => {\r\n  if (props.show) {\r\n      return props.children;\r\n  }return null;\r\n};\r\n\r\n// number range helper\r\nconst range = n => [...Array(n).keys()];\r\n\r\nexport { HiddenToggle, range };","import React, { Component } from 'react';\r\n\r\nimport logo from '../img/logo.svg';\r\n\r\nclass Tile extends Component {\r\n  render() {\r\n    const { isRevealed, hasMine, nearby, flag,\r\n      onMouseDown, onMouseUp, onMouseEnter, onMouseLeave, handleTouch,\r\n      xray, theme } = this.props;\r\n    \r\n    return (\r\n      <div className={`Tile-${theme}`}\r\n        onMouseDown={onMouseDown}\r\n        onMouseUp={onMouseUp}\r\n        onMouseEnter={onMouseEnter}\r\n        onMouseLeave={onMouseLeave}\r\n        onTouchEnd={handleTouch}\r\n        onContextMenu={e => e.preventDefault()}\r\n      >\r\n        <Over isRevealed={isRevealed} flag={flag} xray={xray} theme={theme}>\r\n          <Under hasMine={hasMine} nearby={nearby} />\r\n        </Over>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\n// covers revealed tiles\r\nconst Over = ({ isRevealed, flag, children, xray, theme }) =>\r\n  isRevealed ? children :\r\n    <div className={`Cover-${theme}`}>\r\n      {flag ? <Flag /> : xray ? children : null}\r\n    </div>;\r\n  \r\n// whats underneath tile?\r\nconst Under = ({ hasMine, nearby }) =>\r\n  hasMine ? <Mine /> : <ColoredNumber n={nearby} />\r\n\r\n// minesweeper colors in the css!\r\nconst ColoredNumber = ({ n }) =>\r\n  <span className={`nearby${n}`}>\r\n    {n !== 0 ? n : null}\r\n  </span>;\r\n\r\nconst Mine = () => <img className=\"Mine\" src={logo} alt=\"X\" />;\r\n  \r\nconst Flag = () => <span className=\"Flag\">F</span>;\r\n\r\nexport default Tile;","import React, { Component } from 'react';\r\n\r\nimport Tile from './Tile';\r\n\r\nimport { range } from './generic';\r\n\r\nclass TileGrid extends Component {\r\n  \r\n  render() {\r\n    const { gridState } = this.props;\r\n    if (gridState === null) { return null; }\r\n    return range(gridState.length).map((i) =>\r\n      <div key={i} className=\"Game-grid-row\">\r\n        {range(gridState[i].length).map((j) =>\r\n          <this.renderTileAt key={`${i},${j}`} i={i} j={j} />\r\n        )}\r\n      </div>\r\n    );\r\n  }\r\n  \r\n  renderTileAt = ({ i, j }) => {\r\n    const { isRevealed, hasMine, nearby, flag,\r\n      isHighlighted, xray } = this.props.gridState[i][j];\r\n    // display highlighted tiles as blank\r\n    const isR = isHighlighted ? true : isRevealed,\r\n          hasM = isHighlighted ? false : hasMine,\r\n          nB = isRevealed ? nearby : isHighlighted ? 0 : nearby;\r\n    return <Tile\r\n      isRevealed={isR}\r\n      hasMine={hasM}\r\n      nearby={nB}\r\n      flag={flag}\r\n      xray={xray || this.props.xray}\r\n      theme={this.props.theme}\r\n      onMouseDown={e => this.props.mouseDown(e, i, j)}\r\n      onMouseUp={e => this.props.mouseUp(e, i, j)}\r\n      onMouseEnter={e => this.props.mouseEnter(e, i, j)}\r\n      onMouseLeave={e => this.props.mouseLeave(e, i, j)}\r\n      handleTouch={e => this.props.handleTouch(e, i, j)}\r\n    />;\r\n  }\r\n}\r\n\r\nexport default TileGrid;","import React from 'react';\r\n\r\n// mines left, etc.\r\nconst GameInfo = ({ mines, hidden, time }) =>\r\n  <div className=\"Game-info\">\r\n    <p>\r\n      <span role=\"img\" aria-label=\"bomb\">üí£</span> {mines}\r\n      <span role=\"img\" aria-label=\"question\"> ‚ùì</span> {hidden}\r\n      <span role=\"img\" aria-label=\"timer\"> ‚è±</span> {time}\r\n    </p>\r\n    <p>\r\n      <span role=\"img\" aria-label=\"ok\">üëå </span>\r\n      Click around with right+left click for a safe start!\r\n    </p>\r\n    <p>\r\n      <span role=\"img\" aria-label=\"score\">üíØ </span>\r\n      <a href=\"http://www.minesweeper.info/wiki/3BV\" target=\"blank\">\r\n        Difficulty = minimum # of left clicks to win\r\n      </a>\r\n    </p>\r\n    <p>\r\n      <span role=\"img\" aria-label=\"radioactive\">‚ò¢ </span>\r\n      Use middle click to xray (cheat) the area.\r\n    </p>\r\n  </div>;\r\n\r\nexport default GameInfo;","import React, { Component } from 'react';\r\n\r\nclass GameButtons extends Component {\r\n  \r\n  render() {\r\n    const { newGame, infoOn, xrayOn, theme,\r\n      toggleInfo, toggleXray, toggleTheme } = this.props;\r\n    return (\r\n      <div className=\"GameButtons\">\r\n        <button onClick={newGame}\r\n          className=\"Game-button\"\r\n        >New Game\r\n        </button>\r\n        <button onClick={toggleInfo}\r\n          className={`Game-button${infoOn ? ' toggle' : ''}`}\r\n        >Game Info\r\n        </button>\r\n        <button onClick={toggleXray}\r\n          className={`Game-button${xrayOn ? ' toggle' : ''}`}\r\n        >X-RAY\r\n        </button>\r\n        <button onClick={toggleTheme}\r\n          className={`Game-button${theme === 'light' ? ' toggle' : ''}`}\r\n        >Theme\r\n        </button>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default GameButtons;","import React from 'react';\r\n\r\nconst GameInputs = ({ nCols, nRows, chance,\r\n  onColChange, onRowChange, onChanceChange,\r\n  submitSize\r\n}) =>\r\n  <div>\r\n    <input className=\"Game-input\"\r\n      type=\"number\" value={nCols} min={1} max={32}\r\n      onChange={onColChange}\r\n      onKeyUp={submitSize}/>\r\n    x<input className=\"Game-input\"\r\n      type=\"number\" value={nRows} min={1} max={32}\r\n      onChange={onRowChange}\r\n      onKeyUp={submitSize}/>\r\n    x<input className=\"Game-input\"\r\n      type=\"number\" value={chance} min={0} max={1.0} step={0.01}\r\n      onChange={onChanceChange}\r\n      onKeyUp={submitSize}/>\r\n  </div>\r\n\r\nexport default GameInputs;","import React from 'react';\r\n\r\nimport { HiddenToggle } from './generic';\r\n\r\n// popup message\r\nconst Popup = props =>\r\n  <HiddenToggle show={props.show}>\r\n    <div className=\"Popup\" onContextMenu={e => e.preventDefault()}>\r\n      <div className=\"Popup-inner\">\r\n        <p>{props.text}</p>\r\n        \r\n        {props.text === 'Winner!' ?\r\n          <div className=\"Popup-score\">\r\n            <p>\r\n              Difficulty: {props.score} | Time: {props.time}\r\n            </p>\r\n\r\n            {/* only record games > 5 seconds long & no cheaters! */\r\n            ( props.time < 5 || props.xrayUsed ) ? null\r\n            : <form onSubmit={e => props.submitHiscore(e)}>\r\n                <input autoFocus className=\"Popup-name\" type=\"text\" placeholder=\"Name\" />\r\n                <input className=\"Popup-submit\" type=\"submit\" value=\"Submit\" />\r\n              </form>\r\n            }\r\n          </div>\r\n        : null}\r\n        \r\n        <button className=\"close\" onClick={props.closePopup}>Back</button>\r\n      </div>\r\n    </div>\r\n  </HiddenToggle>;\r\n\r\nexport default Popup;","import React, {Component} from 'react';\r\nimport { graphql, compose } from 'react-apollo';\r\nimport { gql } from 'apollo-boost';\r\n\r\nconst getHiscoresQuery = gql`\r\n  {\r\n    hiscores{\r\n      id\r\n      name\r\n      score\r\n      time\r\n      speed\r\n    }\r\n  }\r\n`;\r\n\r\nconst addHiscoreMutation = gql`\r\n  mutation($name: String!, $score: Int!, $time: Int!, $speed: Float!){\r\n    addHiscore(name: $name, score: $score, time: $time, speed: $speed){\r\n      id\r\n      name\r\n      score\r\n      time\r\n      speed\r\n    }\r\n  }\r\n`;\r\n\r\nclass Hiscores extends Component {\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      lastSubmission: null,\r\n    }\r\n  }\r\n\r\n  componentDidUpdate() {\r\n    const { scoreSubmission } = this.props;\r\n    const { lastSubmission } = this.state;\r\n    if (scoreSubmission !== lastSubmission) {\r\n      this.setState({ lastSubmission: scoreSubmission });\r\n      this.submitHiscore();\r\n    }\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"HiscoreView\">\r\n        <h2>Top 10:</h2>\r\n        <div className=\"Hiscores\">\r\n          <li className=\"Hiscore\">\r\n            <span className=\"HiscoreHeader\">Name</span>\r\n            <span className=\"HiscoreHeader\">EBV / s</span>\r\n          </li>\r\n          {this.displayHiscores()}\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n\r\n  displayHiscores = () => {\r\n    const data = this.props.getHiscoresQuery;\r\n    if (data.loading) {\r\n      return <li>Loading Hiscores...</li>;\r\n    }\r\n    else {\r\n      if (!data.hiscores) {\r\n        return <li>Couldn't connect to DB</li>\r\n      }\r\n      return data.hiscores.map(hiscore => {\r\n        return <Hiscore key={hiscore.id} {...hiscore} />\r\n      })\r\n    }\r\n  }\r\n\r\n  submitHiscore = () => {\r\n    const { scoreSubmission } = this.props;\r\n    if (scoreSubmission.name.length < 1) { return; }\r\n    this.props.addHiscoreMutation({\r\n      variables: { ...scoreSubmission },\r\n      refetchQueries: [{ query: getHiscoresQuery }],\r\n    })\r\n  }\r\n}\r\n\r\nconst Hiscore = ({ name, score, time }) =>\r\n  <li className=\"Hiscore\">\r\n    <span>{name}</span>\r\n    <span>{score} / {time}</span>\r\n  </li>\r\n\r\nexport default compose(\r\n  graphql(getHiscoresQuery, {name: 'getHiscoresQuery'}),\r\n  graphql(addHiscoreMutation, {name: 'addHiscoreMutation'}),\r\n)(Hiscores);","import React, {Component} from 'react';\r\n\r\nimport './Game.scss';\r\n\r\nimport { range } from './generic';\r\nimport TileGrid from './TileGrid';\r\nimport GameInfo from './GameInfo';\r\nimport GameButtons from './GameButtons';\r\nimport GameInputs from './GameInputs';\r\nimport Popup from './Popup';\r\nimport Hiscores from './Hiscores';\r\n\r\n// adjacent tiles\r\nconst NEARBY_COORDS = [\r\n  [-1, -1], [0, -1], [1, -1],\r\n  [-1, 0], /*[0, 0],*/ [1,0],\r\n  [-1, 1], [0, 1], [1,1]\r\n];\r\n  \r\n\r\n// TODO: refactor\r\n// TODO: better performance? bigger grids?\r\n// TODO: adjust tile size?\r\nclass Game extends Component {\r\n  \r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      // grid\r\n      nRows: 10,\r\n      nCols: 10,\r\n      chance: 0.1,\r\n      gridState: null,\r\n      // info\r\n      totalMines: 0,\r\n      totalFlags: 0,\r\n      totalHidden: 100,\r\n      gameStatus: 'Loading',\r\n      time: 0,\r\n      score: 0,\r\n      // menu\r\n      theme: 'dark',\r\n      xrayOn: false,\r\n      infoOn: false,\r\n      // internal\r\n      ignoreNextClick: false,\r\n      scoreSubmission: null,\r\n      xrayUsed: false,\r\n    };\r\n  }\r\n  \r\n  render() {\r\n    const { gameStatus, gridState, nRows, nCols, chance,\r\n      totalMines, totalFlags, totalHidden,\r\n      xrayOn, infoOn, theme, time, score, scoreSubmission,\r\n      xrayUsed,\r\n    } = this.state;\r\n      \r\n    return (\r\n      <div className=\"Game\">\r\n        <div className=\"Game-menu\">\r\n          <GameButtons\r\n            newGame={this.newGame}\r\n            infoOn={infoOn}\r\n            xrayOn={xrayOn}\r\n            theme={theme}\r\n            toggleInfo={this.toggleInfo}\r\n            toggleXray={this.toggleXray}\r\n            toggleTheme={this.toggleTheme}\r\n          />\r\n          \r\n          <GameInputs\r\n            nCols={nCols}\r\n            nRows={nRows}\r\n            chance={chance}\r\n            onColChange={this.onColChange}\r\n            onRowChange={this.onRowChange}\r\n            onChanceChange={this.onChanceChange}\r\n            submitSize={this.submitSize}\r\n          />\r\n        </div>\r\n        \r\n        <div className=\"Game-grid\">\r\n          <TileGrid\r\n            gridState={gridState}\r\n            xray={xrayOn}\r\n            theme={theme}\r\n            mouseDown={this.mouseDown}\r\n            mouseUp={this.mouseUp}\r\n            mouseEnter={this.mouseEnter}\r\n            mouseLeave={this.mouseLeave}\r\n            handleTouch={this.handleTouch}\r\n          />\r\n          test1\r\n          <Popup\r\n            text={gameStatus}\r\n            xrayUsed={xrayUsed}\r\n            score={score}\r\n            time={time}\r\n            submitHiscore={this.submitHiscore}\r\n            closePopup={this.newGame}\r\n            show={gameStatus !== 'Playing'}\r\n          />\r\n        </div>\r\n        \r\n        {infoOn ?\r\n        <GameInfo\r\n          mines={totalMines} flags={totalFlags} hidden={totalHidden} time={time}\r\n        /> : null}\r\n\r\n        <Hiscores scoreSubmission={scoreSubmission} />\r\n        \r\n        <footer>\r\n          <a href=\"https://github.com/jistjoalal/DarkSweeper\">\r\n            <i className=\"fa fa-2x fa-github\"></i>\r\n          </a>\r\n        </footer>\r\n      </div>\r\n    );\r\n  }\r\n  \r\n  componentDidMount() {\r\n    this.newGame();\r\n  }\r\n  \r\n  componentDidUpdate() {\r\n    const { totalHidden, totalMines,\r\n      nRows, nCols, gameStatus, gridState } = this.state;\r\n    \r\n    // new game = calculate nearby numbers, total mines, and reset game\r\n    if (gameStatus === 'New Game') {\r\n      this.countNearby();\r\n      this.setState({\r\n        totalMines: this.gridReduce((i, j) =>\r\n          gridState[i][j].hasMine ? 1 : 0),\r\n        totalFlags: 0,\r\n        totalHidden: nRows * nCols,\r\n        time: 0,\r\n        score: 0,\r\n        gameStatus: 'Playing'\r\n      });\r\n    }\r\n    \r\n    // win condition\r\n    if (totalHidden === totalMines\r\n      // avoid auto-wins\r\n      && totalHidden !== nRows * nCols) \r\n    {\r\n      // total mines is set to string to prevent infinite loop\r\n      // and still appear the same\r\n      this.setState({ gameStatus: 'Scoring',\r\n      totalMines: totalMines.toString() });\r\n      // reset grid for scoring\r\n      clearInterval(this.timer);\r\n      this.resetGrid();\r\n    }\r\n    \r\n    if (gameStatus === 'Scoring') {\r\n      this.setState({\r\n        gameStatus: 'Winner!',\r\n        score: this.scoreGrid()\r\n      });\r\n    }\r\n  }\r\n  \r\n  componentWillUnmount() {\r\n    clearInterval(this.timer);\r\n  }\r\n  \r\n  /*\r\n    Mouse / Touch\r\n  */\r\n\r\n  // 2nd touch point sets flag\r\n  handleTouch = (e, i, j) => {\r\n    if (e.changedTouches[0].identifier === 1) {\r\n      this.handleRightClick(i, j);\r\n    }\r\n  }\r\n  \r\n  mouseEnter = (e, i, j) => {\r\n    const { gameStatus } = this.state;\r\n    if (gameStatus !== 'Playing') { return; }\r\n    // \"both\" down\r\n    if (e.buttons === 3) { this.highlightArea(i, j, true); }\r\n    // middle down\r\n    if (e.buttons === 4) { this.xrayArea(i, j, true); }\r\n  }\r\n  \r\n  mouseLeave = (e, i, j) => {\r\n    // \"both\" down\r\n    if (e.buttons === 3) { this.highlightArea(i, j, false); }\r\n    // middle down\r\n    if (e.buttons === 4) { this.xrayArea(i, j, false); }\r\n  }\r\n  \r\n  mouseDown = (e, i, j) => {\r\n    e.preventDefault(); // prevents click-drag to highlight text\r\n    const { gameStatus } = this.state;\r\n    if (gameStatus !== 'Playing') { return; }\r\n    // \"both\" down\r\n    if (e.buttons === 3) {\r\n      this.setState({ ignoreNextClick: true });\r\n      this.highlightArea(i, j, true);\r\n    }\r\n    // middle down\r\n    if (e.button === 1) { this.xrayArea(i, j, true); }\r\n  }\r\n  \r\n  mouseUp = (e, i, j) => {\r\n    const { ignoreNextClick, gridState } = this.state;\r\n\r\n    // \"both\" up\r\n    if ([1,2].includes(e.buttons)) {\r\n      this.setState({ ignoreNextClick: true });\r\n      this.highlightArea(i, j, false);\r\n      // if nearby mines == nearby flags, reveal this + nearby tiles\r\n      // - !hasMine makes simultaneous click safe!\r\n      if (gridState[i][j].nearby === this.nearbyFlags(i, j)\r\n        && !gridState[i][j].hasMine)\r\n      {\r\n        this.reveal(i, j);\r\n        this.eachNearby(i, j, (ix, jy) => {\r\n          this.reveal(ix, jy);\r\n        });\r\n      }\r\n      return;\r\n    }\r\n    // middle up\r\n    if (e.button === 1) { this.xrayArea(i, j, false); }\r\n    // right up\r\n    else if (e.button === 2 && !ignoreNextClick) {\r\n      this.handleRightClick(i, j);\r\n    }\r\n    // left up\r\n    else if (e.button === 0 && !ignoreNextClick) {\r\n      this.handleClick(i, j);\r\n    }\r\n    this.setState({ ignoreNextClick: false });\r\n  }\r\n \r\n  // left click to reveal tile or lose!\r\n  handleClick = (i, j) => {\r\n    const { gridState, gameStatus } = this.state;\r\n    const { flag } = gridState[i][j];\r\n    \r\n    // ignore clicks if game is over or tile is flagged\r\n    if (gameStatus !== 'Playing' || flag) { return; }\r\n    \r\n    // reveal clicked tile\r\n    this.reveal(i, j);\r\n  }\r\n  \r\n  // right click to set flag\r\n  handleRightClick = (i, j) => {\r\n    const { gridState, gameStatus, totalFlags } = this.state;\r\n    const { isRevealed, flag } = gridState[i][j];\r\n    // ignore clicks if game is over or tile revealed\r\n    if (gameStatus !== 'Playing' || isRevealed) { return; }\r\n    \r\n    // toggle flag\r\n    this.changeTile(i, j, { flag: !flag });\r\n    \r\n    // increment total flags\r\n    const flagChange = !flag ? 1 : -1;\r\n    this.setState({ totalFlags: totalFlags + flagChange });\r\n  }\r\n  \r\n  /*\r\n    Game Config\r\n */\r\n  \r\n  newGame = () => {\r\n    this.setState({\r\n      gridState: this.newGridState(), \r\n      gameStatus: 'New Game',\r\n      xrayUsed: false\r\n    });\r\n    clearInterval(this.timer);\r\n    this.timer = setInterval(() => this.tick(), 1000);\r\n  }\r\n  \r\n  tick = () => {\r\n    const { totalHidden, gameStatus, nRows, nCols } = this.state;\r\n    if (totalHidden !== nRows * nCols && gameStatus === 'Playing') {\r\n      this.setState({time: this.state.time + 1});\r\n    }\r\n  }\r\n  \r\n  toggleTheme = () => {\r\n    const { theme } = this.state;\r\n    const newTheme = theme === 'dark' ? 'light' : 'dark';\r\n    this.setState({ theme: newTheme });\r\n  }\r\n  \r\n  toggleInfo = () => {\r\n    this.setState({ infoOn: !this.state.infoOn });\r\n  }\r\n  \r\n  toggleXray = () => {\r\n    this.setState({\r\n      xrayOn: !this.state.xrayOn,\r\n      xrayUsed: true,\r\n    });\r\n  }\r\n\r\n  // Grid size\r\n  submitSize = e => {\r\n    if (!isNaN(e.target.value)) {\r\n      this.newGame();\r\n    }\r\n  }\r\n  onColChange = e => {\r\n    if (!isNaN(parseInt(e.target.value))) {\r\n      this.setState({ nCols: parseInt(e.target.value)})\r\n    }\r\n  }\r\n  onRowChange = e => {\r\n    if (!isNaN(parseInt(e.target.value))) {\r\n      this.setState({ nRows: parseInt(e.target.value)})\r\n    }\r\n  }\r\n  onChanceChange = e => {\r\n    if (!isNaN(parseFloat(e.target.value))) {\r\n      this.setState({ chance: parseFloat(e.target.value)})\r\n    }\r\n  }\r\n  \r\n  /*\r\n    Scoring\r\n  */\r\n  \r\n  submitHiscore = e => {\r\n    const name = e.target[0].value;\r\n    const { score, time } = this.state;\r\n    this.setState({scoreSubmission: {\r\n      name, score, time,\r\n      speed: (score / time)\r\n    }});\r\n    this.newGame();\r\n    e.preventDefault();\r\n  }\r\n  \r\n  scoreGrid = () => {\r\n    const anyUB = this.anyUnrevealedBlank();\r\n    const anyUN = this.anyUnrevealedNumbers();\r\n    // if any unrevealed blank tile, reveal\r\n    if (anyUB) {\r\n      this.reveal(anyUB.i, anyUB.j);\r\n      return 1 + this.scoreGrid();\r\n    }\r\n    // else if any unrevealed numbers, reveal\r\n    else if (anyUN) {\r\n      this.reveal(anyUN.i, anyUN.j);\r\n      return 1 + this.scoreGrid();\r\n    }\r\n    // else save score\r\n    else {\r\n      return 0;\r\n    }\r\n  }\r\n  \r\n  anyUnrevealedNumbers = () => {\r\n    const { gridState } = this.state;\r\n    let any = false;\r\n    gridState.forEach((row, i) => {\r\n      row.forEach((tile, j) => {\r\n        if (!tile.isRevealed && !tile.hasMine) {\r\n          any = {i, j};\r\n        }\r\n      })\r\n    })\r\n    return any;\r\n  }\r\n  \r\n  anyUnrevealedBlank = () => {\r\n    const { gridState } = this.state;\r\n    let any = false;\r\n    gridState.forEach((row, i) => {\r\n      row.forEach((tile, j) => {\r\n        if (tile.nearby === 0 && !tile.isRevealed && !tile.hasMine) {\r\n          any = {i, j};\r\n        }\r\n      })\r\n    })\r\n    return any;\r\n  }\r\n  \r\n  /*\r\n    Game\r\n  */\r\n  \r\n  // Grid State = 2d array of tile states\r\n  // - nearby is the # of nearby mines\r\n  newGridState = () => {\r\n    const { nRows, nCols, chance } = this.state;\r\n    return range(nRows).map(i => range(nCols).map(j => {\r\n      return {\r\n        isRevealed: false,\r\n        hasMine: Math.random() < chance,\r\n        nearby: 0,\r\n        flag: false,\r\n        isHighlighted: false,\r\n        xray: false\r\n      };\r\n    }));\r\n  }\r\n  \r\n  resetGrid = () => {\r\n    this.everyTile((i, j) => \r\n      this.changeTile(i, j, { isRevealed: false, flag: false }))\r\n  }\r\n  \r\n  xrayArea = (i, j, toggle) => {\r\n    this.changeTile(i, j, { xray: toggle });\r\n    this.eachNearby(i, j, (ix, jy) => {\r\n      this.changeTile(ix, jy, { xray: toggle });\r\n    });\r\n    this.setState({ xrayUsed: true });\r\n  }\r\n  \r\n  highlightArea = (i, j, toggle) => {\r\n    const { gridState } = this.state;\r\n    // highlight self + nearby unflagged tiles\r\n    this.changeTile(i, j, { isHighlighted: toggle })\r\n    this.eachNearby(i, j, (ix, jy) => {\r\n      if (!gridState[ix][jy].flag) {\r\n        this.changeTile(ix, jy, { isHighlighted: toggle });\r\n      }\r\n    })\r\n  }\r\n  \r\n  // revealed tiles that have 0 nearby mines reveal adjacent tiles\r\n  reveal = (i, j) => {\r\n    const { gridState } = this.state;\r\n    const { nearby, hasMine, flag } = gridState[i][j];\r\n    \r\n    // recursion break\r\n    if (gridState[i][j].isRevealed || flag) { return 0; }\r\n\r\n    // check mine\r\n    if (hasMine) {\r\n      this.changeTile(i, j, {isRevealed: true});\r\n      return this.setState({ gameStatus: 'Game Over'});\r\n    }\r\n    \r\n    // reveal tile\r\n    this.changeTile(i, j, {isRevealed: true});\r\n    \r\n    // recount of totalHidden\r\n    this.setState({\r\n      totalHidden: this.gridReduce((i, j) =>\r\n        gridState[i][j].isRevealed ? 0 : 1\r\n      ),\r\n    });\r\n    \r\n    // recursively clear adjacent tiles if 0 nearby\r\n    if (nearby === 0 && !hasMine) {\r\n      this.eachNearby(i, j, (ix, jy) => {\r\n        this.reveal(ix, jy);\r\n      });\r\n    }\r\n  }\r\n  \r\n  // calculates nearby mines for every tile\r\n  countNearby = () => {\r\n    this.everyTile((i, j) =>\r\n      this.changeTile(i, j, { nearby: this.nearbyMines(i, j) }));\r\n  }\r\n  \r\n  // returns # of mines nearby tile @ (i, j)\r\n  nearbyMines = (i, j) => {\r\n    const { gridState } = this.state;\r\n    let sum = 0;\r\n    this.eachNearby(i, j, (ix, jy) =>\r\n      sum += gridState[ix][jy].hasMine ? 1 : 0);\r\n    return sum;\r\n  }\r\n  \r\n  // returns # of flags nearby tile @ (i, j)\r\n  nearbyFlags = (i, j) => {\r\n    const { gridState } = this.state;\r\n    let sum = 0;\r\n    this.eachNearby(i, j, (ix, jy) =>\r\n      sum += gridState[ix][jy].flag ? 1 : 0);\r\n    return sum;\r\n  }\r\n  \r\n  // runs callback on each nearby tile that exists\r\n  eachNearby = (i, j, callback) => {\r\n    NEARBY_COORDS.forEach(c => {\r\n      const ix = i + c[0],\r\n            jy = j + c[1];\r\n      if (this.validTile(ix, jy)) {\r\n        callback(ix, jy);\r\n      }\r\n    });\r\n  }\r\n  \r\n  // 2d array summing thing\r\n  gridReduce = reducer => {\r\n    let sum = 0;\r\n    this.everyTile((i, j) =>\r\n      sum += reducer(i, j));\r\n    return sum;\r\n  }\r\n  \r\n  // assign change to tile @ (i, j)\r\n  changeTile = (i, j, change) => {\r\n    const gridState = this.state.gridState.slice();\r\n    Object.assign(gridState[i][j], change);\r\n    this.setState({ gridState });\r\n  }\r\n  \r\n  // callback to 2d array\r\n  everyTile = callback =>\r\n    this.state.gridState.map((row, i) => row.map((tile, j) => callback(i, j)))\r\n  \r\n  // boolean if tile exists at i,j coords\r\n  validTile = (i, j) =>\r\n    typeof this.state.gridState[i] === 'undefined' ? false :\r\n      typeof this.state.gridState[i][j] !== 'undefined'\r\n}\r\n\r\nexport default Game;","import React, {Component} from 'react';\r\nimport ApolloClient from 'apollo-boost';\r\nimport { ApolloProvider } from 'react-apollo';\r\n\r\nimport Game from './components/Game';\r\n\r\nconst client = new ApolloClient({\r\n  uri: '/graphql'\r\n})\r\n\r\n// TODO: hiscores page with sorting and pagination (just to view)\r\nclass App extends Component {\r\n  \r\n  render() {\r\n    return (\r\n      <ApolloProvider client={client}>\r\n        <Game />\r\n      </ApolloProvider>\r\n    )\r\n  }\r\n}\r\n\r\nexport default App;","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport App from './App';\r\n\r\nReactDOM.render(<App />, document.getElementById('root'));\r\n\r\nif (module.hot) {\r\n    module.hot.accept();\r\n}\r\n"],"sourceRoot":""}